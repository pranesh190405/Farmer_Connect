(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75245,e=>{"use strict";async function r(e,t={}){let a=await fetch(e,{...t,credentials:"include",headers:{"Content-Type":"application/json",...t.headers}}),s=await a.json();if(!a.ok)throw Error(s.error||"API request failed");return s}class t{static async getMarketCrops(e={}){try{let t=new URLSearchParams;return e.search&&t.set("search",e.search),e.category&&"all"!==e.category&&t.set("category",e.category),e.region&&"all"!==e.region&&t.set("region",e.region),t.set("status","active"),(await r(`/api/listings?${t.toString()}`)).listings||[]}catch(e){return console.error("getMarketCrops error:",e),[]}}static async getFarmerListings(){try{return(await r("/api/listings/my")).listings||[]}catch(e){return console.error("getFarmerListings error:",e),[]}}static async addListing(e){try{return(await r("/api/listings",{method:"POST",body:JSON.stringify(e)})).listing}catch(e){throw console.error("addListing error:",e),e}}static async updateListing(e,t){try{return(await r(`/api/listings/${e}`,{method:"PUT",body:JSON.stringify(t)})).listing}catch(e){throw console.error("updateListing error:",e),e}}static async updateListingStatus(e,t){try{return(await r(`/api/listings/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})})).listing}catch(e){throw console.error("updateListingStatus error:",e),e}}static async getListingById(e){try{return(await r(`/api/listings/${e}`)).listing}catch(e){return console.error("getListingById error:",e),null}}static async deleteListing(e){try{return await r(`/api/listings/${e}`,{method:"DELETE"}),!0}catch(e){return console.error("deleteListing error:",e),!1}}static async placeOrder(e){try{return(await r("/api/orders",{method:"POST",body:JSON.stringify(e)})).order}catch(e){throw console.error("placeOrder error:",e),e}}static async getMyOrders(){try{return(await r("/api/orders/my")).orders||[]}catch(e){return console.error("getMyOrders error:",e),[]}}static async getProfile(){try{return(await r("/api/users/profile")).profile}catch(e){return console.error("getProfile error:",e),null}}static async updateProfile(e){try{return await r("/api/users/profile",{method:"PUT",body:JSON.stringify(e)})}catch(e){throw console.error("updateProfile error:",e),e}}static async updateLocation(e){try{return await r("/api/users/location",{method:"PUT",body:JSON.stringify(e)})}catch(e){throw console.error("updateLocation error:",e),e}}static async updatePreferences(e){try{return await r("/api/users/preferences",{method:"PUT",body:JSON.stringify(e)})}catch(e){throw console.error("updatePreferences error:",e),e}}static async getAdminStats(){try{return(await r("/api/admin/stats")).stats}catch(e){return console.error("getAdminStats error:",e),null}}static async getAdminUsers(){try{return(await r("/api/admin/users")).users||[]}catch(e){return console.error("getAdminUsers error:",e),[]}}static async approveUser(e){try{return await r(`/api/admin/users/${e}/approve`,{method:"PUT"})}catch(e){throw console.error("approveUser error:",e),e}}static async rejectUser(e){try{return await r(`/api/admin/users/${e}/reject`,{method:"PUT"})}catch(e){throw console.error("rejectUser error:",e),e}}}e.s(["ApiService",()=>t])},66660,e=>{"use strict";let r=(0,e.i(3070).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>r],66660)},93060,e=>{"use strict";let r=(0,e.i(3070).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>r],93060)},9022,e=>{"use strict";let r=(0,e.i(3070).default)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);e.s(["ShoppingBag",()=>r],9022)},60746,e=>{"use strict";let r=(0,e.i(3070).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>r],60746)},67563,e=>{"use strict";var r=e.i(70650),t=e.i(33375),a=e.i(44140);e.i(64142);var s=e.i(73178),i=e.i(9022),l=e.i(66660),c=e.i(37850),o=e.i(60746);let n=(0,e.i(3070).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var d=e.i(93060),m=e.i(75245),h=e.i(46733);function g(){let{t:e}=(0,s.useTranslation)("common"),[g,u]=(0,t.useState)(!1),[x,p]=(0,t.useState)([]),[y,b]=(0,t.useState)(!0),[f,w]=(0,t.useState)("active");(0,t.useEffect)(()=>{u(!0),v()},[]);let v=async()=>{try{let e=(await m.ApiService.getMyOrders()).map(e=>({id:e.id,items:e.items.map(e=>`${e.cropName} (${e.quantity}kg)`).join(", "),total:`â‚¹${e.totalAmount}`,status:"placed"===e.status?"active":e.status,date:new Date(e.createdAt).toISOString().split("T")[0],farmer:e.farmerName||"Farmer",image:e.items[0]?.image||"https://images.unsplash.com/photo-1592924357228-91a4daadcfea?auto=format&fit=crop&q=80&w=100"}));p(e)}catch(r){console.error("Failed to fetch orders:",r),h.toast.error(e("common.error")||"Failed to load orders")}finally{b(!1)}};if(!g)return null;let j=[{label:e("dashboard.buyer.stats.totalOrders"),value:x.length,icon:i.ShoppingBag,color:"bg-blue-100 text-blue-600"},{label:e("dashboard.buyer.stats.activeOrders"),value:x.filter(e=>"active"===e.status).length,icon:l.Clock,color:"bg-yellow-100 text-yellow-600"},{label:e("dashboard.buyer.stats.completed"),value:x.filter(e=>"completed"===e.status).length,icon:c.CheckCircle,color:"bg-green-100 text-green-600"}];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-24 font-sans",children:[(0,r.jsx)("header",{className:"bg-white border-b sticky top-0 z-10 px-6 py-4 shadow-sm",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center max-w-7xl mx-auto gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:e("dashboard.buyer.welcome")}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:e("dashboard.buyer.welcomeDesc")})]}),(0,r.jsx)("div",{className:"flex gap-3 w-full md:w-auto",children:(0,r.jsxs)(a.default,{href:"/market",className:"bg-green-600 text-white px-5 py-2.5 rounded-full font-semibold flex items-center justify-center gap-2 text-sm hover:bg-green-700 active:scale-95 transition-all shadow-md hover:shadow-lg w-full md:w-auto",children:[(0,r.jsx)(o.Search,{className:"w-4 h-4"}),e("dashboard.buyer.browseMarket")]})})]})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-8",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:j.map((e,t)=>(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-5 md:p-6 shadow-sm border border-gray-100 flex items-center gap-4 hover:shadow-md transition-shadow",children:[(0,r.jsx)("div",{className:`p-3 rounded-xl ${e.color}`,children:(0,r.jsx)(e.icon,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:e.label}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:e.value})]})]},t))}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,r.jsx)("div",{className:"flex border-b border-gray-200 overflow-x-auto hide-scrollbar",children:["active","completed","cancelled"].map(t=>(0,r.jsxs)("button",{onClick:()=>w(t),className:`
                                    px-6 py-4 text-sm font-medium capitalize transition-all relative whitespace-nowrap
                                    ${f===t?"text-green-600 bg-green-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}
                                `,children:[(r=>{switch(r){case"active":return e("dashboard.buyer.tabs.active");case"completed":return e("dashboard.buyer.tabs.completed");case"cancelled":return e("dashboard.buyer.tabs.cancelled");default:return r}})(t),(0,r.jsx)("span",{className:`ml-2 text-xs py-0.5 px-2 rounded-full ${f===t?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:x.filter(e=>e.status===t).length}),f===t&&(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-green-600"})]},t))}),(0,r.jsx)("div",{className:"p-4 md:p-6",children:y?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-green-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-500 text-sm",children:e("common.loading")})]}):0===x.filter(e=>e.status===f).length?(0,r.jsxs)("div",{className:"text-center py-16 px-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(i.ShoppingBag,{className:"w-8 h-8 text-gray-300"})}),(0,r.jsx)("h3",{className:"text-gray-900 font-bold text-lg mb-1",children:e("dashboard.buyer.empty.title",{status:f})}),(0,r.jsx)("p",{className:"text-gray-500 text-sm max-w-sm mx-auto mb-6",children:e("dashboard.buyer.empty.desc",{status:f})}),"active"===f&&(0,r.jsxs)(a.default,{href:"/market",className:"inline-flex items-center gap-2 text-green-600 font-semibold hover:text-green-700 bg-green-50 px-4 py-2 rounded-lg transition-colors",children:[(0,r.jsx)(o.Search,{className:"w-4 h-4"}),e("dashboard.buyer.empty.startShopping")]})]}):(0,r.jsx)("div",{className:"space-y-4",children:x.filter(e=>e.status===f).map(t=>(0,r.jsx)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 hover:border-green-200 transition-all shadow-sm hover:shadow-md group",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-lg bg-gray-100 overflow-hidden flex-shrink-0",children:(0,r.jsx)("img",{src:t.image,alt:t.items,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-gray-900 truncate",children:t.items}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e("dashboard.buyer.orderId"),t.id]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2 mt-1 md:mt-0",children:(0,r.jsx)("span",{className:"text-sm font-bold text-green-700 bg-green-50 px-2 py-1 rounded-md",children:t.total})})]}),(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-4 text-xs text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full bg-gray-100 flex items-center justify-center text-[10px]",children:"ðŸ‘¨â€ðŸŒ¾"}),(0,r.jsx)("span",{className:"font-medium text-gray-700",children:t.farmer})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(n,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:t.date})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 ml-auto md:ml-0",children:[(0,r.jsx)("span",{className:`w-2 h-2 rounded-full ${"active"===t.status?"bg-yellow-400 animate-pulse":"bg-green-500"}`}),(0,r.jsx)("span",{className:"capitalize",children:"active"===t.status?e("dashboard.buyer.inProgress"):t.status})]})]})]}),(0,r.jsx)("div",{className:"w-full md:w-auto mt-2 md:mt-0 pt-2 md:pt-0 border-t md:border-t-0 border-gray-100",children:(0,r.jsxs)("button",{className:"w-full md:w-auto flex items-center justify-center gap-1 text-sm font-medium text-gray-600 hover:text-green-600 py-2 px-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e("dashboard.buyer.trackOrder")," ",(0,r.jsx)(d.ChevronRight,{className:"w-4 h-4"})]})})]})},t.id))})})]})]})]})}e.s(["default",()=>g],67563)}]);