(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75245,e=>{"use strict";async function t(e,r={}){let a=await fetch(e,{...r,credentials:"include",headers:{"Content-Type":"application/json",...r.headers}}),s=await a.json();if(!a.ok)throw Error(s.error||"API request failed");return s}class r{static async getMarketCrops(e={}){try{let r=new URLSearchParams;return e.search&&r.set("search",e.search),e.category&&"all"!==e.category&&r.set("category",e.category),e.region&&"all"!==e.region&&r.set("region",e.region),r.set("status","active"),(await t(`/api/listings?${r.toString()}`)).listings||[]}catch(e){return console.error("getMarketCrops error:",e),[]}}static async getFarmerListings(){try{return(await t("/api/listings/my")).listings||[]}catch(e){return console.error("getFarmerListings error:",e),[]}}static async addListing(e){try{return(await t("/api/listings",{method:"POST",body:JSON.stringify(e)})).listing}catch(e){throw console.error("addListing error:",e),e}}static async updateListing(e,r){try{return(await t(`/api/listings/${e}`,{method:"PUT",body:JSON.stringify(r)})).listing}catch(e){throw console.error("updateListing error:",e),e}}static async updateListingStatus(e,r){try{return(await t(`/api/listings/${e}/status`,{method:"PUT",body:JSON.stringify({status:r})})).listing}catch(e){throw console.error("updateListingStatus error:",e),e}}static async getListingById(e){try{return(await t(`/api/listings/${e}`)).listing}catch(e){return console.error("getListingById error:",e),null}}static async deleteListing(e){try{return await t(`/api/listings/${e}`,{method:"DELETE"}),!0}catch(e){return console.error("deleteListing error:",e),!1}}static async placeOrder(e){try{return(await t("/api/orders",{method:"POST",body:JSON.stringify(e)})).order}catch(e){throw console.error("placeOrder error:",e),e}}static async getMyOrders(){try{return(await t("/api/orders/my")).orders||[]}catch(e){return console.error("getMyOrders error:",e),[]}}static async getProfile(){try{return(await t("/api/users/profile")).profile}catch(e){return console.error("getProfile error:",e),null}}static async updateProfile(e){try{return await t("/api/users/profile",{method:"PUT",body:JSON.stringify(e)})}catch(e){throw console.error("updateProfile error:",e),e}}static async updateLocation(e){try{return await t("/api/users/location",{method:"PUT",body:JSON.stringify(e)})}catch(e){throw console.error("updateLocation error:",e),e}}static async updatePreferences(e){try{return await t("/api/users/preferences",{method:"PUT",body:JSON.stringify(e)})}catch(e){throw console.error("updatePreferences error:",e),e}}static async getAdminStats(){try{return(await t("/api/admin/stats")).stats}catch(e){return console.error("getAdminStats error:",e),null}}static async getAdminUsers(){try{return(await t("/api/admin/users")).users||[]}catch(e){return console.error("getAdminUsers error:",e),[]}}static async approveUser(e){try{return await t(`/api/admin/users/${e}/approve`,{method:"PUT"})}catch(e){throw console.error("approveUser error:",e),e}}static async rejectUser(e){try{return await t(`/api/admin/users/${e}/reject`,{method:"PUT"})}catch(e){throw console.error("rejectUser error:",e),e}}}e.s(["ApiService",()=>r])},89610,e=>{"use strict";let t=(0,e.i(3070).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],89610)},64704,e=>{"use strict";let t=(0,e.i(3070).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],64704)},89410,e=>{e.v({addBtn:"page-module__oUZwwG__addBtn",container:"page-module__oUZwwG__container",error:"page-module__oUZwwG__error",footer:"page-module__oUZwwG__footer",header:"page-module__oUZwwG__header",input:"page-module__oUZwwG__input",removeBtn:"page-module__oUZwwG__removeBtn",select:"page-module__oUZwwG__select",subtitle:"page-module__oUZwwG__subtitle",table:"page-module__oUZwwG__table",tableContainer:"page-module__oUZwwG__tableContainer",title:"page-module__oUZwwG__title"})},42856,e=>{"use strict";var t=e.i(70650),r=e.i(33375),a=e.i(86383);e.i(64142);var s=e.i(73178),i=e.i(77474),o=e.i(96637);let l=(0,e.i(3070).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var n=e.i(89610),c=e.i(64704),d=e.i(75245),u=e.i(46733),h=e.i(89410);let p=[{value:"",label:"Select Crop"},{value:"Potato",label:"Potato"},{value:"Onion",label:"Onion"},{value:"Tomato",label:"Tomato"},{value:"Wheat",label:"Wheat"},{value:"Rice",label:"Rice"},{value:"Cotton",label:"Cotton"}];function y(){let{t:e}=(0,s.useTranslation)("common"),y=(0,a.useRouter)(),[g,m]=(0,r.useState)(!1),[w,x]=(0,r.useState)([{id:1,crop:"",variety:"",quantity:"",price:"",minQty:"",image:""}]),v=(e,t,r)=>{x(w.map(a=>a.id===e?{...a,[t]:r}:a))},f=async()=>{let e=(()=>{for(let e=0;e<w.length;e++){let t=w[e];if(!t.crop)return`Row ${e+1}: Select a crop`;if(!t.quantity)return`Row ${e+1}: Enter quantity`;if(!t.price)return`Row ${e+1}: Enter price`}return null})();if(e)return void(0,u.showToast)(e,"error");m(!0);try{await Promise.all(w.map(e=>d.ApiService.addListing({cropName:`${e.crop} ${e.variety?`(${e.variety})`:""}`.trim(),category:"vegetables",variety:e.variety||"",quantity:parseFloat(e.quantity),unit:"kg",expectedPrice:parseFloat(e.price),minQty:parseFloat(e.minQty)||1,imageUrl:e.image||""}))),(0,u.showToast)("All listings created successfully!","success"),setTimeout(()=>{y.push("/farmer/dashboard")},1e3)}catch(e){(0,u.showToast)("Failed to create listings","error"),console.error(e)}finally{m(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white border-b px-6 py-4 sticky top-0 z-10",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>y.back(),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(n.ArrowLeft,{className:"w-5 h-5 text-gray-600"})}),(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Batch Listing"})]})})}),(0,t.jsxs)("main",{className:h.default.container,children:[(0,t.jsx)("div",{className:h.default.tableContainer,children:(0,t.jsxs)("table",{className:h.default.table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:"20%"},children:"Crop Details"}),(0,t.jsx)("th",{style:{width:"15%"},children:"Quantity (kg)"}),(0,t.jsx)("th",{style:{width:"15%"},children:"Price (â‚¹/kg)"}),(0,t.jsx)("th",{style:{width:"15%"},children:"Min. Order"}),(0,t.jsx)("th",{style:{width:"20%"},children:"Photo"}),(0,t.jsx)("th",{style:{width:"10%"},children:"Actions"})]})}),(0,t.jsx)("tbody",{children:w.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("select",{className:h.default.select,value:e.crop,onChange:t=>v(e.id,"crop",t.target.value),children:p.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsx)("input",{type:"text",className:h.default.input,placeholder:"Variety (Optional)",value:e.variety,onChange:t=>v(e.id,"variety",t.target.value)})]})}),(0,t.jsx)("td",{children:(0,t.jsx)("input",{type:"number",className:h.default.input,placeholder:"Total Qty",value:e.quantity,onChange:t=>v(e.id,"quantity",t.target.value)})}),(0,t.jsx)("td",{children:(0,t.jsx)("input",{type:"number",className:h.default.input,placeholder:"Price",value:e.price,onChange:t=>v(e.id,"price",t.target.value)})}),(0,t.jsx)("td",{children:(0,t.jsx)("input",{type:"number",className:h.default.input,placeholder:"Min Qty",value:e.minQty,onChange:t=>v(e.id,"minQty",t.target.value)})}),(0,t.jsx)("td",{children:e.image?(0,t.jsxs)("div",{className:"relative w-16 h-16 rounded overflow-hidden group",children:[(0,t.jsx)("img",{src:e.image,alt:"Crop",className:"w-full h-full object-cover"}),(0,t.jsx)("button",{className:"absolute inset-0 bg-black/50 text-white opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",onClick:()=>v(e.id,"image",""),children:(0,t.jsx)(o.Trash2,{className:"w-4 h-4"})})]}):(0,t.jsxs)("button",{className:"w-full py-3 border border-dashed border-gray-300 rounded-lg text-gray-500 hover:bg-gray-50 text-xs flex flex-col items-center gap-1",onClick:()=>{var t;let r;return t=e.id,void(!(r=w.find(e=>e.id===t)).crop?(0,u.showToast)("Select a crop first","error"):(v(t,"image",`https://source.unsplash.com/400x300/?${r.crop.toLowerCase()},vegetable`),(0,u.showToast)("Image uploaded (simulated)","success")))},children:[(0,t.jsx)(c.Upload,{className:"w-4 h-4"}),"Add Photo"]})}),(0,t.jsx)("td",{children:w.length>1&&(0,t.jsx)("button",{className:h.default.removeBtn,onClick:()=>{var t;return t=e.id,void(1!==w.length&&x(w.filter(e=>e.id!==t)))},title:"Remove row",children:(0,t.jsx)(o.Trash2,{className:"w-4 h-4"})})})]},e.id))})]})}),(0,t.jsxs)("button",{className:h.default.addBtn,onClick:()=>{x([...w,{id:Date.now(),crop:"",variety:"",quantity:"",price:"",minQty:"",image:""}])},children:[(0,t.jsx)(i.Plus,{className:"w-5 h-5 inline-block mr-2"}),"Add Another Crop"]})]}),(0,t.jsxs)("div",{className:h.default.footer,children:[(0,t.jsx)("button",{className:"px-6 py-2.5 text-gray-600 font-medium hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>y.back(),children:"Cancel"}),(0,t.jsx)("button",{className:"px-6 py-2.5 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",onClick:f,disabled:g,children:g?(0,t.jsx)("span",{children:"Saving..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{className:"w-4 h-4"}),"Submit All"]})})]})]})}e.s(["default",()=>y],42856)}]);