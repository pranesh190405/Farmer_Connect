(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95811,e=>{e.v({button:"Button-module__Ld164q__button",fullWidth:"Button-module__Ld164q__fullWidth",hiddenText:"Button-module__Ld164q__hiddenText",lg:"Button-module__Ld164q__lg",loading:"Button-module__Ld164q__loading",md:"Button-module__Ld164q__md",outline:"Button-module__Ld164q__outline",primary:"Button-module__Ld164q__primary",secondary:"Button-module__Ld164q__secondary",sm:"Button-module__Ld164q__sm",spin:"Button-module__Ld164q__spin",spinner:"Button-module__Ld164q__spinner"})},51224,60829,e=>{"use strict";var r=e.i(70650),t=e.i(95811);function a({children:e,variant:a="primary",size:s="lg",isLoading:i=!1,disabled:l=!1,fullWidth:n=!1,type:o="button",onClick:d,ariaLabel:c,className:u="",...p}){let m=[t.default.button,t.default[a],t.default[s],n?t.default.fullWidth:"",i?t.default.loading:"",u].filter(Boolean).join(" ");return(0,r.jsxs)("button",{type:o,className:m,disabled:l||i,onClick:d,"aria-label":c,"aria-busy":i,...p,children:[i?(0,r.jsx)("span",{className:t.default.spinner,"aria-hidden":"true"}):null,(0,r.jsx)("span",{className:i?t.default.hiddenText:"",children:e})]})}e.s(["default",()=>a],60829),e.s([],51224)},80150,e=>{e.v({disabled:"Input-module__5rI_1a__disabled",error:"Input-module__5rI_1a__error",hasError:"Input-module__5rI_1a__hasError",hint:"Input-module__5rI_1a__hint",input:"Input-module__5rI_1a__input",inputWrapper:"Input-module__5rI_1a__inputWrapper",label:"Input-module__5rI_1a__label",prefix:"Input-module__5rI_1a__prefix",required:"Input-module__5rI_1a__required",suffix:"Input-module__5rI_1a__suffix",wrapper:"Input-module__5rI_1a__wrapper"})},80331,1125,e=>{"use strict";var r=e.i(70650),t=e.i(33375),a=e.i(80150);let s=(0,t.forwardRef)(function({label:e,error:s,hint:i,prefix:l,suffix:n,id:o,type:d="text",disabled:c=!1,required:u=!1,className:p="",...m},h){let g=(0,t.useId)(),y=o||`input-${g}`,f=s?`${y}-error`:void 0,x=i?`${y}-hint`:void 0;return(0,r.jsxs)("div",{className:`${a.default.wrapper} ${p}`,children:[e&&(0,r.jsxs)("label",{htmlFor:y,className:a.default.label,children:[e,u&&(0,r.jsx)("span",{className:a.default.required,"aria-hidden":"true",children:" *"})]}),(0,r.jsxs)("div",{className:`${a.default.inputWrapper} ${s?a.default.hasError:""} ${c?a.default.disabled:""}`,children:[l&&(0,r.jsx)("span",{className:a.default.prefix,"aria-hidden":"true",children:l}),(0,r.jsx)("input",{ref:h,id:y,type:d,disabled:c,required:u,"aria-invalid":s?"true":"false","aria-describedby":[f,x].filter(Boolean).join(" ")||void 0,className:a.default.input,...m}),n&&(0,r.jsx)("span",{className:a.default.suffix,children:n})]}),s&&(0,r.jsx)("p",{id:f,className:a.default.error,role:"alert",children:s}),i&&!s&&(0,r.jsx)("p",{id:x,className:a.default.hint,children:i})]})});e.s(["default",0,s],1125),e.s([],80331)},93641,e=>{e.v({arrow:"Select-module__nnj5sG__arrow",disabled:"Select-module__nnj5sG__disabled",error:"Select-module__nnj5sG__error",hasError:"Select-module__nnj5sG__hasError",hint:"Select-module__nnj5sG__hint",label:"Select-module__nnj5sG__label",required:"Select-module__nnj5sG__required",select:"Select-module__nnj5sG__select",selectWrapper:"Select-module__nnj5sG__selectWrapper",wrapper:"Select-module__nnj5sG__wrapper"})},77905,16646,e=>{"use strict";var r=e.i(70650),t=e.i(33375),a=e.i(93641);let s=(0,t.forwardRef)(function({label:e,error:s,hint:i,options:l=[],placeholder:n="Select an option",id:o,disabled:d=!1,required:c=!1,className:u="",...p},m){let h=(0,t.useId)(),g=o||`select-${h}`,y=s?`${g}-error`:void 0,f=i?`${g}-hint`:void 0;return(0,r.jsxs)("div",{className:`${a.default.wrapper} ${u}`,children:[e&&(0,r.jsxs)("label",{htmlFor:g,className:a.default.label,children:[e,c&&(0,r.jsx)("span",{className:a.default.required,"aria-hidden":"true",children:" *"})]}),(0,r.jsxs)("div",{className:`${a.default.selectWrapper} ${s?a.default.hasError:""} ${d?a.default.disabled:""}`,children:[(0,r.jsxs)("select",{ref:m,id:g,disabled:d,required:c,"aria-invalid":s?"true":"false","aria-describedby":[y,f].filter(Boolean).join(" ")||void 0,className:a.default.select,...p,children:[(0,r.jsx)("option",{value:"",disabled:!0,children:n}),l.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,r.jsx)("span",{className:a.default.arrow,"aria-hidden":"true",children:"â–¼"})]}),s&&(0,r.jsx)("p",{id:y,className:a.default.error,role:"alert",children:s}),i&&!s&&(0,r.jsx)("p",{id:f,className:a.default.hint,children:i})]})});e.s(["default",0,s],16646),e.s([],77905)},98966,e=>{"use strict";let r=(0,e.i(3070).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>r],98966)},75245,e=>{"use strict";async function r(e,t={}){let a=await fetch(e,{...t,credentials:"include",headers:{"Content-Type":"application/json",...t.headers}}),s=await a.json();if(!a.ok)throw Error(s.error||"API request failed");return s}class t{static async getMarketCrops(e={}){try{let t=new URLSearchParams;return e.search&&t.set("search",e.search),e.category&&"all"!==e.category&&t.set("category",e.category),e.region&&"all"!==e.region&&t.set("region",e.region),t.set("status","active"),(await r(`/api/listings?${t.toString()}`)).listings||[]}catch(e){return console.error("getMarketCrops error:",e),[]}}static async getFarmerListings(){try{return(await r("/api/listings/my")).listings||[]}catch(e){return console.error("getFarmerListings error:",e),[]}}static async addListing(e){try{return(await r("/api/listings",{method:"POST",body:JSON.stringify(e)})).listing}catch(e){throw console.error("addListing error:",e),e}}static async updateListing(e,t){try{return(await r(`/api/listings/${e}`,{method:"PUT",body:JSON.stringify(t)})).listing}catch(e){throw console.error("updateListing error:",e),e}}static async updateListingStatus(e,t){try{return(await r(`/api/listings/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})})).listing}catch(e){throw console.error("updateListingStatus error:",e),e}}static async getListingById(e){try{return(await r(`/api/listings/${e}`)).listing}catch(e){return console.error("getListingById error:",e),null}}static async deleteListing(e){try{return await r(`/api/listings/${e}`,{method:"DELETE"}),!0}catch(e){return console.error("deleteListing error:",e),!1}}static async placeOrder(e){try{return(await r("/api/orders",{method:"POST",body:JSON.stringify(e)})).order}catch(e){throw console.error("placeOrder error:",e),e}}static async getMyOrders(){try{return(await r("/api/orders/my")).orders||[]}catch(e){return console.error("getMyOrders error:",e),[]}}static async getProfile(){try{return(await r("/api/users/profile")).profile}catch(e){return console.error("getProfile error:",e),null}}static async updateProfile(e){try{return await r("/api/users/profile",{method:"PUT",body:JSON.stringify(e)})}catch(e){throw console.error("updateProfile error:",e),e}}static async updateLocation(e){try{return await r("/api/users/location",{method:"PUT",body:JSON.stringify(e)})}catch(e){throw console.error("updateLocation error:",e),e}}static async updatePreferences(e){try{return await r("/api/users/preferences",{method:"PUT",body:JSON.stringify(e)})}catch(e){throw console.error("updatePreferences error:",e),e}}static async getAdminStats(){try{return(await r("/api/admin/stats")).stats}catch(e){return console.error("getAdminStats error:",e),null}}static async getAdminUsers(){try{return(await r("/api/admin/users")).users||[]}catch(e){return console.error("getAdminUsers error:",e),[]}}static async approveUser(e){try{return await r(`/api/admin/users/${e}/approve`,{method:"PUT"})}catch(e){throw console.error("approveUser error:",e),e}}static async rejectUser(e){try{return await r(`/api/admin/users/${e}/reject`,{method:"PUT"})}catch(e){throw console.error("rejectUser error:",e),e}}}e.s(["ApiService",()=>t])},89610,e=>{"use strict";let r=(0,e.i(3070).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>r],89610)},64704,e=>{"use strict";let r=(0,e.i(3070).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>r],64704)},84653,78244,e=>{"use strict";let r=(0,e.i(3070).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],84653);var t=e.i(70650),a=e.i(33375);e.i(64142);var s=e.i(73178);function i({initialQuality:e={},onChange:r}){let{t:i}=(0,s.useTranslation)("common"),[l,n]=(0,a.useState)({size:e.size||50,freshness:e.freshness||80,ripeness:e.ripeness||60});(0,a.useEffect)(()=>{r&&r(l)},[l]);let o=(e,r)=>{n(t=>({...t,[e]:parseInt(r)}))},d=(e,r)=>"size"===e?r<30?"Small":r<70?"Medium":"Large":"freshness"===e?r<40?"Average":r<80?"Fresh":"Farm Fresh":"ripeness"===e?r<30?"Raw":r<70?"Semi-Ripe":"Fully Ripe":"";return(0,t.jsxs)("div",{className:"space-y-6 bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Quality Parameters"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("label",{className:"font-medium text-gray-700",children:"Size"}),(0,t.jsx)("span",{className:"text-green-700 font-bold",children:d("size",l.size)})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:l.size,onChange:e=>o("size",e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-600"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-400",children:[(0,t.jsx)("span",{children:"Small"}),(0,t.jsx)("span",{children:"Large"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("label",{className:"font-medium text-gray-700",children:"Freshness"}),(0,t.jsx)("span",{className:"text-green-700 font-bold",children:d("freshness",l.freshness)})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:l.freshness,onChange:e=>o("freshness",e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-600"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-400",children:[(0,t.jsx)("span",{children:"Harvested >2d ago"}),(0,t.jsx)("span",{children:"Just Harvested"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("label",{className:"font-medium text-gray-700",children:"Ripeness"}),(0,t.jsx)("span",{className:"text-green-700 font-bold",children:d("ripeness",l.ripeness)})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:l.ripeness,onChange:e=>o("ripeness",e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-600"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-400",children:[(0,t.jsx)("span",{children:"Raw"}),(0,t.jsx)("span",{children:"Ripe"})]})]})]})}e.s(["default",()=>i],78244)},83777,e=>{"use strict";var r=e.i(70650),t=e.i(33375),a=e.i(86383);e.i(64142);var s=e.i(73178),i=e.i(89610),l=e.i(64704),n=e.i(98966),o=e.i(84653),d=e.i(44140),c=e.i(75245),u=e.i(46733);e.i(51224);var p=e.i(60829),m=e.i(78244);e.i(80331);var h=e.i(1125);e.i(77905);var g=e.i(16646);function y(){let{t:e}=(0,s.useTranslation)("common"),y=(0,a.useRouter)(),[f,x]=(0,t.useState)(!1),[_,b]=(0,t.useState)({address:"",lat:null,lng:null,status:"detecting"}),j=[{value:"Potato",label:e("listing.crops.potato")||"Potato"},{value:"Onion",label:e("listing.crops.onion")||"Onion"},{value:"Tomato",label:e("listing.crops.tomato")||"Tomato"},{value:"Wheat",label:e("listing.crops.wheat")||"Wheat"},{value:"Rice",label:e("listing.crops.rice")||"Rice"},{value:"Cotton",label:e("listing.crops.cotton")||"Cotton"}],[v,w]=(0,t.useState)({crop:"",variety:"",quantity:"",price:"",minQty:"",quality:{size:50,freshness:80,ripeness:60}});(0,t.useEffect)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{let{latitude:r,longitude:t}=e.coords;b(e=>({...e,lat:r,lng:t}));try{let e=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${r}&lon=${t}&format=json&addressdetails=1`,{headers:{"Accept-Language":"en"}}),a=await e.json(),s=a.address||{},i=[s.village||s.town||s.city||s.suburb||"",s.county||s.state_district||"",s.state||""].filter(Boolean).join(", ")||a.display_name||"";b({address:i,lat:r,lng:t,status:"detected"})}catch{b({address:`${r.toFixed(4)}, ${t.toFixed(4)}`,lat:r,lng:t,status:"detected"})}},e=>{console.warn("Geolocation error:",e.message),1===e.code?(b(e=>({...e,status:"denied"})),u.toast.warning?.("Location access denied. Listing will be created without location.")||u.toast.error?.("Location access denied")):b(e=>({...e,status:"error"}))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}):b(e=>({...e,status:"error"}))},[]);let N=async r=>{if(r.preventDefault(),!v.crop||!v.quantity||!v.price)return void u.toast.error(e("common.fillFields")||"Please fill all required fields");x(!0);try{let r={cropName:`${v.crop} ${v.variety?`(${v.variety})`:""}`.trim(),category:"vegetables",variety:v.variety||"",quantity:parseFloat(v.quantity),unit:"kg",expectedPrice:parseFloat(v.price),minQty:parseFloat(v.minQty)||50,locationAddress:_.address||"",locationLat:_.lat||null,locationLng:_.lng||null};await c.ApiService.addListing(r),u.toast.success(e("common.listingCreated")||"Listing created successfully!"),y.push("/farmer/dashboard")}catch(r){console.error(r),u.toast.error(e("common.error")||"Something went wrong")}finally{x(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20 font-sans",children:[(0,r.jsxs)("header",{className:"bg-white border-b sticky top-0 z-10 px-6 py-4 shadow-sm flex items-center gap-4",children:[(0,r.jsx)(d.default,{href:"/farmer/dashboard",className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,r.jsx)(i.ArrowLeft,{className:"w-5 h-5 text-gray-600"})}),(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:e("dashboard.newListing")})]}),(0,r.jsx)("main",{className:"max-w-2xl mx-auto p-6",children:(0,r.jsxs)("form",{onSubmit:N,className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-8 flex flex-col items-center justify-center text-gray-400 hover:border-green-500 hover:bg-green-50 hover:text-green-600 transition-all cursor-pointer group",children:[(0,r.jsx)("div",{className:"bg-gray-100 p-4 rounded-full mb-3 group-hover:bg-white",children:(0,r.jsx)(l.Upload,{className:"w-6 h-6"})}),(0,r.jsx)("p",{className:"font-medium text-sm",children:e("listing.new.uploadImage")}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e("listing.new.imageSupport")})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(g.default,{label:e("listing.new.cropType"),placeholder:e("listing.new.selectCrop"),options:j,value:v.crop,onChange:e=>w(r=>({...r,crop:e.target.value}))}),(0,r.jsx)(h.default,{label:e("listing.new.variety"),placeholder:e("listing.new.varietyPlaceholder"),value:v.variety,onChange:e=>w(r=>({...r,variety:e.target.value}))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(h.default,{label:e("listing.new.totalQuantity"),placeholder:e("listing.new.quantityPlaceholder"),type:"number",value:v.quantity,onChange:e=>w(r=>({...r,quantity:e.target.value}))}),(0,r.jsx)(h.default,{label:e("listing.new.minQuantity"),placeholder:e("listing.new.minQuantityPlaceholder"),type:"number",value:v.minQty,onChange:e=>w(r=>({...r,minQty:e.target.value}))})]}),(0,r.jsx)(h.default,{label:e("listing.new.pricePerKg"),placeholder:e("listing.new.pricePlaceholder"),type:"number",value:v.price,onChange:e=>w(r=>({...r,price:e.target.value}))}),(0,r.jsx)(m.default,{initialQuality:v.quality,onChange:e=>w(r=>({...r,quality:e}))}),(0,r.jsxs)("div",{className:"rounded-xl border border-gray-200 p-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(n.MapPin,{className:"w-4 h-4 inline-block mr-1 -mt-0.5"}),"Location"]}),"detecting"===_.status&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,r.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}),"Detecting your location..."]}),"detected"===_.status&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:_.address})]}),"denied"===_.status&&(0,r.jsx)("p",{className:"text-sm text-amber-600",children:"ðŸ“ Location access was denied. Your listing will be created without location."}),"error"===_.status&&(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"ðŸ“ Could not detect location. Your listing will be created without location."})]}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)(p.default,{type:"submit",fullWidth:!0,isLoading:f,disabled:f,children:f?e("listing.new.creating"):e("listing.new.createButton")})})]})})]})}e.s(["default",()=>y])}]);