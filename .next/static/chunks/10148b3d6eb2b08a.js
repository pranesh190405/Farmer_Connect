(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95811,e=>{e.v({button:"Button-module__Ld164q__button",fullWidth:"Button-module__Ld164q__fullWidth",hiddenText:"Button-module__Ld164q__hiddenText",lg:"Button-module__Ld164q__lg",loading:"Button-module__Ld164q__loading",md:"Button-module__Ld164q__md",outline:"Button-module__Ld164q__outline",primary:"Button-module__Ld164q__primary",secondary:"Button-module__Ld164q__secondary",sm:"Button-module__Ld164q__sm",spin:"Button-module__Ld164q__spin",spinner:"Button-module__Ld164q__spinner"})},51224,60829,e=>{"use strict";var t=e.i(70650),r=e.i(95811);function a({children:e,variant:a="primary",size:l="lg",isLoading:n=!1,disabled:s=!1,fullWidth:i=!1,type:u="button",onClick:d,ariaLabel:o,className:c="",...m}){let _=[r.default.button,r.default[a],r.default[l],i?r.default.fullWidth:"",n?r.default.loading:"",c].filter(Boolean).join(" ");return(0,t.jsxs)("button",{type:u,className:_,disabled:s||n,onClick:d,"aria-label":o,"aria-busy":n,...m,children:[n?(0,t.jsx)("span",{className:r.default.spinner,"aria-hidden":"true"}):null,(0,t.jsx)("span",{className:n?r.default.hiddenText:"",children:e})]})}e.s(["default",()=>a],60829),e.s([],51224)},80150,e=>{e.v({disabled:"Input-module__5rI_1a__disabled",error:"Input-module__5rI_1a__error",hasError:"Input-module__5rI_1a__hasError",hint:"Input-module__5rI_1a__hint",input:"Input-module__5rI_1a__input",inputWrapper:"Input-module__5rI_1a__inputWrapper",label:"Input-module__5rI_1a__label",prefix:"Input-module__5rI_1a__prefix",required:"Input-module__5rI_1a__required",suffix:"Input-module__5rI_1a__suffix",wrapper:"Input-module__5rI_1a__wrapper"})},80331,1125,e=>{"use strict";var t=e.i(70650),r=e.i(33375),a=e.i(80150);let l=(0,r.forwardRef)(function({label:e,error:l,hint:n,prefix:s,suffix:i,id:u,type:d="text",disabled:o=!1,required:c=!1,className:m="",..._},p){let f=(0,r.useId)(),h=u||`input-${f}`,x=l?`${h}-error`:void 0,b=n?`${h}-hint`:void 0;return(0,t.jsxs)("div",{className:`${a.default.wrapper} ${m}`,children:[e&&(0,t.jsxs)("label",{htmlFor:h,className:a.default.label,children:[e,c&&(0,t.jsx)("span",{className:a.default.required,"aria-hidden":"true",children:" *"})]}),(0,t.jsxs)("div",{className:`${a.default.inputWrapper} ${l?a.default.hasError:""} ${o?a.default.disabled:""}`,children:[s&&(0,t.jsx)("span",{className:a.default.prefix,"aria-hidden":"true",children:s}),(0,t.jsx)("input",{ref:p,id:h,type:d,disabled:o,required:c,"aria-invalid":l?"true":"false","aria-describedby":[x,b].filter(Boolean).join(" ")||void 0,className:a.default.input,..._}),i&&(0,t.jsx)("span",{className:a.default.suffix,children:i})]}),l&&(0,t.jsx)("p",{id:x,className:a.default.error,role:"alert",children:l}),n&&!l&&(0,t.jsx)("p",{id:b,className:a.default.hint,children:n})]})});e.s(["default",0,l],1125),e.s([],80331)},56657,e=>{e.v({error:"OTPInput-module__mqNHnG__error",filled:"OTPInput-module__mqNHnG__filled",hasError:"OTPInput-module__mqNHnG__hasError",input:"OTPInput-module__mqNHnG__input",inputGroup:"OTPInput-module__mqNHnG__inputGroup",wrapper:"OTPInput-module__mqNHnG__wrapper"})},56636,53408,e=>{"use strict";var t=e.i(70650),r=e.i(33375),a=e.i(56657);function l({length:e=6,onComplete:l,onChange:n,error:s,disabled:i=!1}){let[u,d]=(0,r.useState)(Array(e).fill("")),o=(0,r.useRef)([]);(0,r.useEffect)(()=>{o.current[0]&&o.current[0].focus()},[]),(0,r.useEffect)(()=>{let t=u.join("");n&&n(t),t.length===e&&l&&l(t)},[u,e,l,n]);let c=t=>{t.preventDefault();let r=t.clipboardData.getData("text").slice(0,e);if(!/^\d+$/.test(r))return;let a=[...u];r.split("").forEach((t,r)=>{r<e&&(a[r]=t)}),d(a);let l=Math.min(r.length,e)-1;o.current[l]?.focus()};return(0,t.jsxs)("div",{className:a.default.wrapper,children:[(0,t.jsx)("div",{className:`${a.default.inputGroup} ${s?a.default.hasError:""}`,role:"group","aria-label":"OTP input",children:u.map((r,l)=>(0,t.jsx)("input",{ref:e=>o.current[l]=e,type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:1,value:r,disabled:i,onChange:t=>((t,r)=>{let a=r.slice(-1);if(a&&!/^\d$/.test(a))return;let l=[...u];l[t]=a,d(l),a&&t<e-1&&o.current[t+1]?.focus()})(l,t.target.value),onKeyDown:t=>((t,r)=>{if("Backspace"===r.key){!u[t]&&t>0&&o.current[t-1]?.focus();let e=[...u];e[t]="",d(e)}else"ArrowLeft"===r.key&&t>0?o.current[t-1]?.focus():"ArrowRight"===r.key&&t<e-1&&o.current[t+1]?.focus()})(l,t),onPaste:c,className:`${a.default.input} ${r?a.default.filled:""}`,"aria-label":`Digit ${l+1} of ${e}`},l))}),s&&(0,t.jsx)("p",{className:a.default.error,role:"alert",children:s})]})}e.s(["default",()=>l],53408),e.s([],56636)},5965,e=>{"use strict";var t=e.i(70650),r=e.i(33375),a=e.i(86383),l=e.i(31169);e.i(64142);var n=e.i(73178),s=e.i(90759);e.i(51224);var i=e.i(60829);e.i(80331);var u=e.i(1125);e.i(56636);var d=e.i(53408),o=e.i(46733),c=e.i(44140);function m(){let{t:e}=(0,n.useTranslation)("common"),m=(0,a.useRouter)(),_=(0,l.useDispatch)(),{isAuthenticated:p,user:f,error:h,isLoading:x}=(0,l.useSelector)(e=>e.auth),[b,g]=(0,r.useState)("farmer"),[y,v]=(0,r.useState)(""),[N,j]=(0,r.useState)(""),[w,I]=(0,r.useState)("mobile");(0,r.useEffect)(()=>{p&&f&&("farmer"===f.type?m.push("/farmer/dashboard"):"buyer"===f.type?m.push("/buyer/dashboard"):"admin"===f.type&&m.push("/admin/dashboard"))},[p,f,m]),(0,r.useEffect)(()=>{h&&(0,o.showToast)(h,"error")},[h]);let T=async e=>{if(e.preventDefault(),10!==y.length)return void(0,o.showToast)("Enter valid 10-digit mobile number","error");try{await _((0,s.sendOtpAsync)(y)).unwrap(),I("otp"),(0,o.showToast)("OTP sent: 123456","success")}catch(e){(0,o.showToast)(e||"Failed to send OTP","error")}},q=async e=>{if(e.preventDefault(),N.length<4)return void(0,o.showToast)("Enter valid OTP","error");try{(await _((0,s.verifyOtpAsync)({mobile:y,otp:N,userType:b})).unwrap()).isNewUser&&((0,o.showToast)("No account found. Please register first.","error"),m.push(`/${b}/register`))}catch(e){(0,o.showToast)(e||"Invalid OTP","error")}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Login to continue"})]}),(0,t.jsxs)("div",{className:"flex bg-gray-100 p-1 rounded-xl mb-6",children:[(0,t.jsx)("button",{className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${"farmer"===b?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>g("farmer"),disabled:"otp"===w,children:"Farmer"}),(0,t.jsx)("button",{className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${"buyer"===b?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>g("buyer"),disabled:"otp"===w,children:"Buyer"}),(0,t.jsx)("button",{className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${"admin"===b?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>g("admin"),children:"Admin"})]}),"admin"===b?(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(c.default,{href:"/admin/login",className:"text-green-600 font-medium hover:underline",children:"Go to Admin Login"})}):(0,t.jsxs)("form",{onSubmit:"mobile"===w?T:q,className:"space-y-6",children:["mobile"===w?(0,t.jsx)(u.default,{label:"Mobile Number",placeholder:"Enter 10-digit mobile number",value:y,onChange:e=>v(e.target.value.replace(/\D/g,"").slice(0,10)),type:"tel",required:!0}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Enter OTP"}),(0,t.jsx)(d.default,{length:6,value:N,onChange:j}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("button",{type:"button",onClick:()=>I("mobile"),className:"text-xs text-green-600 hover:underline",children:"Change Mobile Number"})})]}),(0,t.jsx)(i.default,{type:"submit",fullWidth:!0,isLoading:x,children:"mobile"===w?"Send OTP":"Verify & Login"}),"mobile"===w&&(0,t.jsxs)("p",{className:"text-center text-sm text-gray-500 mt-4",children:["Don't have an account?"," ",(0,t.jsx)(c.default,{href:`/${b}/register`,className:"text-green-600 font-medium hover:underline",children:"Register here"})]})]})]})})}e.s(["default",()=>m])}]);