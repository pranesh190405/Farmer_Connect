{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\n\r\n/**\r\n * Middleware for route protection\r\n * Checks authentication status and redirects accordingly\r\n */\r\nexport function middleware(request) {\r\n    const { pathname } = request.nextUrl;\r\n\r\n    // Get auth token from cookies (in production, use httpOnly cookie)\r\n    const token = request.cookies.get('auth_token')?.value;\r\n\r\n    // Define protected routes\r\n    const protectedRoutes = [\r\n        '/farmer/dashboard',\r\n        '/buyer/dashboard',\r\n        '/profile',\r\n        '/listings/create',\r\n        '/negotiations',\r\n    ];\r\n\r\n    // Define auth routes (redirect if already logged in)\r\n    const authRoutes = [\r\n        '/farmer/register',\r\n        '/farmer/login',\r\n        '/buyer/register',\r\n        '/buyer/login',\r\n    ];\r\n\r\n    // Check if current path is protected\r\n    const isProtectedRoute = protectedRoutes.some(route =>\r\n        pathname.startsWith(route)\r\n    );\r\n\r\n    // Check if current path is an auth route\r\n    const isAuthRoute = authRoutes.some(route =>\r\n        pathname.startsWith(route)\r\n    );\r\n\r\n    // Redirect to login if accessing protected route without auth\r\n    // if (isProtectedRoute && !token) {\r\n    //     const loginUrl = new URL('/farmer/register', request.url);\r\n    //     loginUrl.searchParams.set('redirect', pathname);\r\n    //     return NextResponse.redirect(loginUrl);\r\n    // }\r\n\r\n    // Redirect to dashboard if accessing auth route while logged in\r\n    // if (isAuthRoute && token) {\r\n    //     // Parse token to get user type (simplified - in production decode JWT)\r\n    //     const dashboardUrl = new URL('/farmer/dashboard', request.url);\r\n    //     return NextResponse.redirect(dashboardUrl);\r\n    // }\r\n\r\n    return NextResponse.next();\r\n}\r\n\r\n// Configure which routes to run middleware on\r\nexport const config = {\r\n    matcher: [\r\n        /*\r\n         * Match all request paths except:\r\n         * - api (API routes)\r\n         * - _next/static (static files)\r\n         * - _next/image (image optimization files)\r\n         * - favicon.ico (favicon file)\r\n         * - public folder\r\n         */\r\n        '/((?!api|_next/static|_next/image|favicon.ico|icons|locales).*)',\r\n    ],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAMO,SAAS,WAAW,OAAO;IAC9B,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,mEAAmE;IACnE,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,eAAe;IAEjD,0BAA0B;IAC1B,MAAM,kBAAkB;QACpB;QACA;QACA;QACA;QACA;KACH;IAED,qDAAqD;IACrD,MAAM,aAAa;QACf;QACA;QACA;QACA;KACH;IAED,qCAAqC;IACrC,MAAM,mBAAmB,gBAAgB,IAAI,CAAC,CAAA,QAC1C,SAAS,UAAU,CAAC;IAGxB,yCAAyC;IACzC,MAAM,cAAc,WAAW,IAAI,CAAC,CAAA,QAChC,SAAS,UAAU,CAAC;IAGxB,8DAA8D;IAC9D,oCAAoC;IACpC,iEAAiE;IACjE,uDAAuD;IACvD,8CAA8C;IAC9C,IAAI;IAEJ,gEAAgE;IAChE,8BAA8B;IAC9B,8EAA8E;IAC9E,sEAAsE;IACtE,kDAAkD;IAClD,IAAI;IAEJ,OAAO,gMAAY,CAAC,IAAI;AAC5B;AAGO,MAAM,SAAS;IAClB,SAAS;QACL;;;;;;;SAOC,GACD;KACH;AACL"}}]
}