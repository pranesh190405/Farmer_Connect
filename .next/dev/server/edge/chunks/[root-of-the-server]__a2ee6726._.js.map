{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/SEM6/SE/Farmer_Connect/src/middleware.js"],"sourcesContent":["import { NextResponse } from 'next/server';\n\n/**\n * Middleware for route protection\n * Checks authentication status and redirects accordingly\n */\nexport function middleware(request) {\n    const { pathname } = request.nextUrl;\n\n    // Get auth token from cookies (in production, use httpOnly cookie)\n    const token = request.cookies.get('auth_token')?.value;\n\n    // Define protected routes\n    const protectedRoutes = [\n        '/farmer/dashboard',\n        '/buyer/dashboard',\n        '/profile',\n        '/listings/create',\n        '/negotiations',\n    ];\n\n    // Define auth routes (redirect if already logged in)\n    const authRoutes = [\n        '/farmer/register',\n        '/farmer/login',\n        '/buyer/register',\n        '/buyer/login',\n    ];\n\n    // Check if current path is protected\n    const isProtectedRoute = protectedRoutes.some(route =>\n        pathname.startsWith(route)\n    );\n\n    // Check if current path is an auth route\n    const isAuthRoute = authRoutes.some(route =>\n        pathname.startsWith(route)\n    );\n\n    // Redirect to login if accessing protected route without auth\n    // if (isProtectedRoute && !token) {\n    //     const loginUrl = new URL('/farmer/register', request.url);\n    //     loginUrl.searchParams.set('redirect', pathname);\n    //     return NextResponse.redirect(loginUrl);\n    // }\n\n    // Redirect to dashboard if accessing auth route while logged in\n    // if (isAuthRoute && token) {\n    //     // Parse token to get user type (simplified - in production decode JWT)\n    //     const dashboardUrl = new URL('/farmer/dashboard', request.url);\n    //     return NextResponse.redirect(dashboardUrl);\n    // }\n\n    return NextResponse.next();\n}\n\n// Configure which routes to run middleware on\nexport const config = {\n    matcher: [\n        /*\n         * Match all request paths except:\n         * - api (API routes)\n         * - _next/static (static files)\n         * - _next/image (image optimization files)\n         * - favicon.ico (favicon file)\n         * - public folder\n         */\n        '/((?!api|_next/static|_next/image|favicon.ico|icons|locales).*)',\n    ],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAMO,SAAS,WAAW,OAAO;IAC9B,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,mEAAmE;IACnE,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,eAAe;IAEjD,0BAA0B;IAC1B,MAAM,kBAAkB;QACpB;QACA;QACA;QACA;QACA;KACH;IAED,qDAAqD;IACrD,MAAM,aAAa;QACf;QACA;QACA;QACA;KACH;IAED,qCAAqC;IACrC,MAAM,mBAAmB,gBAAgB,IAAI,CAAC,CAAA,QAC1C,SAAS,UAAU,CAAC;IAGxB,yCAAyC;IACzC,MAAM,cAAc,WAAW,IAAI,CAAC,CAAA,QAChC,SAAS,UAAU,CAAC;IAGxB,8DAA8D;IAC9D,oCAAoC;IACpC,iEAAiE;IACjE,uDAAuD;IACvD,8CAA8C;IAC9C,IAAI;IAEJ,gEAAgE;IAChE,8BAA8B;IAC9B,8EAA8E;IAC9E,sEAAsE;IACtE,kDAAkD;IAClD,IAAI;IAEJ,OAAO,gOAAY,CAAC,IAAI;AAC5B;AAGO,MAAM,SAAS;IAClB,SAAS;QACL;;;;;;;SAOC,GACD;KACH;AACL"}}]
}