module.exports=[67084,a=>{"use strict";async function b(a,c={}){let d=await fetch(a,{...c,credentials:"include",headers:{"Content-Type":"application/json",...c.headers}}),e=await d.json();if(!d.ok)throw Error(e.error||"API request failed");return e}class c{static async getMarketCrops(a={}){try{let c=new URLSearchParams;return a.search&&c.set("search",a.search),a.category&&"all"!==a.category&&c.set("category",a.category),a.region&&"all"!==a.region&&c.set("region",a.region),c.set("status","active"),(await b(`/api/listings?${c.toString()}`)).listings||[]}catch(a){return console.error("getMarketCrops error:",a),[]}}static async getFarmerListings(){try{return(await b("/api/listings/my")).listings||[]}catch(a){return console.error("getFarmerListings error:",a),[]}}static async addListing(a){try{return(await b("/api/listings",{method:"POST",body:JSON.stringify(a)})).listing}catch(a){throw console.error("addListing error:",a),a}}static async updateListing(a,c){try{return(await b(`/api/listings/${a}`,{method:"PUT",body:JSON.stringify(c)})).listing}catch(a){throw console.error("updateListing error:",a),a}}static async updateListingStatus(a,c){try{return(await b(`/api/listings/${a}/status`,{method:"PUT",body:JSON.stringify({status:c})})).listing}catch(a){throw console.error("updateListingStatus error:",a),a}}static async getListingById(a){try{return(await b(`/api/listings/${a}`)).listing}catch(a){return console.error("getListingById error:",a),null}}static async deleteListing(a){try{return await b(`/api/listings/${a}`,{method:"DELETE"}),!0}catch(a){return console.error("deleteListing error:",a),!1}}static async placeOrder(a){try{return(await b("/api/orders",{method:"POST",body:JSON.stringify(a)})).order}catch(a){throw console.error("placeOrder error:",a),a}}static async getMyOrders(){try{return(await b("/api/orders/my")).orders||[]}catch(a){return console.error("getMyOrders error:",a),[]}}static async getProfile(){try{return(await b("/api/users/profile")).profile}catch(a){return console.error("getProfile error:",a),null}}static async updateProfile(a){try{return await b("/api/users/profile",{method:"PUT",body:JSON.stringify(a)})}catch(a){throw console.error("updateProfile error:",a),a}}static async updateLocation(a){try{return await b("/api/users/location",{method:"PUT",body:JSON.stringify(a)})}catch(a){throw console.error("updateLocation error:",a),a}}static async updatePreferences(a){try{return await b("/api/users/preferences",{method:"PUT",body:JSON.stringify(a)})}catch(a){throw console.error("updatePreferences error:",a),a}}static async getAdminStats(){try{return(await b("/api/admin/stats")).stats}catch(a){return console.error("getAdminStats error:",a),null}}static async getAdminUsers(){try{return(await b("/api/admin/users")).users||[]}catch(a){return console.error("getAdminUsers error:",a),[]}}static async approveUser(a){try{return await b(`/api/admin/users/${a}/approve`,{method:"PUT"})}catch(a){throw console.error("approveUser error:",a),a}}static async rejectUser(a){try{return await b(`/api/admin/users/${a}/reject`,{method:"PUT"})}catch(a){throw console.error("rejectUser error:",a),a}}}a.s(["ApiService",()=>c])},97597,a=>{"use strict";let b=(0,a.i(67293).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],97597)},11717,a=>{"use strict";let b=(0,a.i(67293).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],11717)},96006,a=>{a.v({addBtn:"page-module__oUZwwG__addBtn",container:"page-module__oUZwwG__container",error:"page-module__oUZwwG__error",footer:"page-module__oUZwwG__footer",header:"page-module__oUZwwG__header",input:"page-module__oUZwwG__input",removeBtn:"page-module__oUZwwG__removeBtn",select:"page-module__oUZwwG__select",subtitle:"page-module__oUZwwG__subtitle",table:"page-module__oUZwwG__table",tableContainer:"page-module__oUZwwG__tableContainer",title:"page-module__oUZwwG__title"})},49424,a=>{"use strict";var b=a.i(14793),c=a.i(29507),d=a.i(15188);a.i(46121);var e=a.i(83556),f=a.i(5706),g=a.i(32336);let h=(0,a.i(67293).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var i=a.i(97597),j=a.i(11717),k=a.i(67084),l=a.i(48235),m=a.i(96006);let n=[{value:"",label:"Select Crop"},{value:"Potato",label:"Potato"},{value:"Onion",label:"Onion"},{value:"Tomato",label:"Tomato"},{value:"Wheat",label:"Wheat"},{value:"Rice",label:"Rice"},{value:"Cotton",label:"Cotton"}];function o(){let{t:a}=(0,e.useTranslation)("common"),o=(0,d.useRouter)(),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)([{id:1,crop:"",variety:"",quantity:"",price:"",minQty:"",image:""}]),t=(a,b,c)=>{s(r.map(d=>d.id===a?{...d,[b]:c}:d))},u=async()=>{let a=(()=>{for(let a=0;a<r.length;a++){let b=r[a];if(!b.crop)return`Row ${a+1}: Select a crop`;if(!b.quantity)return`Row ${a+1}: Enter quantity`;if(!b.price)return`Row ${a+1}: Enter price`}return null})();if(a)return void(0,l.showToast)(a,"error");q(!0);try{await Promise.all(r.map(a=>k.ApiService.addListing({cropName:`${a.crop} ${a.variety?`(${a.variety})`:""}`.trim(),category:"vegetables",variety:a.variety||"",quantity:parseFloat(a.quantity),unit:"kg",expectedPrice:parseFloat(a.price),minQty:parseFloat(a.minQty)||1,imageUrl:a.image||""}))),(0,l.showToast)("All listings created successfully!","success"),setTimeout(()=>{o.push("/farmer/dashboard")},1e3)}catch(a){(0,l.showToast)("Failed to create listings","error"),console.error(a)}finally{q(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white border-b px-6 py-4 sticky top-0 z-10",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>o.back(),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,b.jsx)(i.ArrowLeft,{className:"w-5 h-5 text-gray-600"})}),(0,b.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Batch Listing"})]})})}),(0,b.jsxs)("main",{className:m.default.container,children:[(0,b.jsx)("div",{className:m.default.tableContainer,children:(0,b.jsxs)("table",{className:m.default.table,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{width:"20%"},children:"Crop Details"}),(0,b.jsx)("th",{style:{width:"15%"},children:"Quantity (kg)"}),(0,b.jsx)("th",{style:{width:"15%"},children:"Price (â‚¹/kg)"}),(0,b.jsx)("th",{style:{width:"15%"},children:"Min. Order"}),(0,b.jsx)("th",{style:{width:"20%"},children:"Photo"}),(0,b.jsx)("th",{style:{width:"10%"},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:r.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("select",{className:m.default.select,value:a.crop,onChange:b=>t(a.id,"crop",b.target.value),children:n.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))}),(0,b.jsx)("input",{type:"text",className:m.default.input,placeholder:"Variety (Optional)",value:a.variety,onChange:b=>t(a.id,"variety",b.target.value)})]})}),(0,b.jsx)("td",{children:(0,b.jsx)("input",{type:"number",className:m.default.input,placeholder:"Total Qty",value:a.quantity,onChange:b=>t(a.id,"quantity",b.target.value)})}),(0,b.jsx)("td",{children:(0,b.jsx)("input",{type:"number",className:m.default.input,placeholder:"Price",value:a.price,onChange:b=>t(a.id,"price",b.target.value)})}),(0,b.jsx)("td",{children:(0,b.jsx)("input",{type:"number",className:m.default.input,placeholder:"Min Qty",value:a.minQty,onChange:b=>t(a.id,"minQty",b.target.value)})}),(0,b.jsx)("td",{children:a.image?(0,b.jsxs)("div",{className:"relative w-16 h-16 rounded overflow-hidden group",children:[(0,b.jsx)("img",{src:a.image,alt:"Crop",className:"w-full h-full object-cover"}),(0,b.jsx)("button",{className:"absolute inset-0 bg-black/50 text-white opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",onClick:()=>t(a.id,"image",""),children:(0,b.jsx)(g.Trash2,{className:"w-4 h-4"})})]}):(0,b.jsxs)("button",{className:"w-full py-3 border border-dashed border-gray-300 rounded-lg text-gray-500 hover:bg-gray-50 text-xs flex flex-col items-center gap-1",onClick:()=>{var b;let c;return b=a.id,void(!(c=r.find(a=>a.id===b)).crop?(0,l.showToast)("Select a crop first","error"):(t(b,"image",`https://source.unsplash.com/400x300/?${c.crop.toLowerCase()},vegetable`),(0,l.showToast)("Image uploaded (simulated)","success")))},children:[(0,b.jsx)(j.Upload,{className:"w-4 h-4"}),"Add Photo"]})}),(0,b.jsx)("td",{children:r.length>1&&(0,b.jsx)("button",{className:m.default.removeBtn,onClick:()=>{var b;return b=a.id,void(1!==r.length&&s(r.filter(a=>a.id!==b)))},title:"Remove row",children:(0,b.jsx)(g.Trash2,{className:"w-4 h-4"})})})]},a.id))})]})}),(0,b.jsxs)("button",{className:m.default.addBtn,onClick:()=>{s([...r,{id:Date.now(),crop:"",variety:"",quantity:"",price:"",minQty:"",image:""}])},children:[(0,b.jsx)(f.Plus,{className:"w-5 h-5 inline-block mr-2"}),"Add Another Crop"]})]}),(0,b.jsxs)("div",{className:m.default.footer,children:[(0,b.jsx)("button",{className:"px-6 py-2.5 text-gray-600 font-medium hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>o.back(),children:"Cancel"}),(0,b.jsx)("button",{className:"px-6 py-2.5 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",onClick:u,disabled:p,children:p?(0,b.jsx)("span",{children:"Saving..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{className:"w-4 h-4"}),"Submit All"]})})]})]})}a.s(["default",()=>o],49424)}];

//# sourceMappingURL=SEM6_SE_Farmer_Connect_e490bba4._.js.map