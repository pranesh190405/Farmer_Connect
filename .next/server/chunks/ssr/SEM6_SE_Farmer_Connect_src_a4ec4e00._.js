module.exports=[18801,a=>{a.v({error:"OTPInput-module__mqNHnG__error",filled:"OTPInput-module__mqNHnG__filled",hasError:"OTPInput-module__mqNHnG__hasError",input:"OTPInput-module__mqNHnG__input",inputGroup:"OTPInput-module__mqNHnG__inputGroup",wrapper:"OTPInput-module__mqNHnG__wrapper"})},10434,42172,a=>{"use strict";var b=a.i(14793),c=a.i(29507),d=a.i(18801);function e({length:a=6,onComplete:e,onChange:f,error:g,disabled:h=!1}){let[i,j]=(0,c.useState)(Array(a).fill("")),k=(0,c.useRef)([]);(0,c.useEffect)(()=>{k.current[0]&&k.current[0].focus()},[]),(0,c.useEffect)(()=>{let b=i.join("");f&&f(b),b.length===a&&e&&e(b)},[i,a,e,f]);let l=b=>{b.preventDefault();let c=b.clipboardData.getData("text").slice(0,a);if(!/^\d+$/.test(c))return;let d=[...i];c.split("").forEach((b,c)=>{c<a&&(d[c]=b)}),j(d);let e=Math.min(c.length,a)-1;k.current[e]?.focus()};return(0,b.jsxs)("div",{className:d.default.wrapper,children:[(0,b.jsx)("div",{className:`${d.default.inputGroup} ${g?d.default.hasError:""}`,role:"group","aria-label":"OTP input",children:i.map((c,e)=>(0,b.jsx)("input",{ref:a=>k.current[e]=a,type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:1,value:c,disabled:h,onChange:b=>((b,c)=>{let d=c.slice(-1);if(d&&!/^\d$/.test(d))return;let e=[...i];e[b]=d,j(e),d&&b<a-1&&k.current[b+1]?.focus()})(e,b.target.value),onKeyDown:b=>((b,c)=>{if("Backspace"===c.key){!i[b]&&b>0&&k.current[b-1]?.focus();let a=[...i];a[b]="",j(a)}else"ArrowLeft"===c.key&&b>0?k.current[b-1]?.focus():"ArrowRight"===c.key&&b<a-1&&k.current[b+1]?.focus()})(e,b),onPaste:l,className:`${d.default.input} ${c?d.default.filled:""}`,"aria-label":`Digit ${e+1} of ${a}`},e))}),g&&(0,b.jsx)("p",{className:d.default.error,role:"alert",children:g})]})}a.s(["default",()=>e],42172),a.s([],10434)},90758,a=>{a.v({button:"Button-module__Ld164q__button",fullWidth:"Button-module__Ld164q__fullWidth",hiddenText:"Button-module__Ld164q__hiddenText",lg:"Button-module__Ld164q__lg",loading:"Button-module__Ld164q__loading",md:"Button-module__Ld164q__md",outline:"Button-module__Ld164q__outline",primary:"Button-module__Ld164q__primary",secondary:"Button-module__Ld164q__secondary",sm:"Button-module__Ld164q__sm",spin:"Button-module__Ld164q__spin",spinner:"Button-module__Ld164q__spinner"})},22142,72395,a=>{"use strict";var b=a.i(14793),c=a.i(90758);function d({children:a,variant:d="primary",size:e="lg",isLoading:f=!1,disabled:g=!1,fullWidth:h=!1,type:i="button",onClick:j,ariaLabel:k,className:l="",...m}){let n=[c.default.button,c.default[d],c.default[e],h?c.default.fullWidth:"",f?c.default.loading:"",l].filter(Boolean).join(" ");return(0,b.jsxs)("button",{type:i,className:n,disabled:g||f,onClick:j,"aria-label":k,"aria-busy":f,...m,children:[f?(0,b.jsx)("span",{className:c.default.spinner,"aria-hidden":"true"}):null,(0,b.jsx)("span",{className:f?c.default.hiddenText:"",children:a})]})}a.s(["default",()=>d],72395),a.s([],22142)},59973,a=>{a.v({disabled:"Input-module__5rI_1a__disabled",error:"Input-module__5rI_1a__error",hasError:"Input-module__5rI_1a__hasError",hint:"Input-module__5rI_1a__hint",input:"Input-module__5rI_1a__input",inputWrapper:"Input-module__5rI_1a__inputWrapper",label:"Input-module__5rI_1a__label",prefix:"Input-module__5rI_1a__prefix",required:"Input-module__5rI_1a__required",suffix:"Input-module__5rI_1a__suffix",wrapper:"Input-module__5rI_1a__wrapper"})},59096,82728,a=>{"use strict";var b=a.i(14793),c=a.i(29507),d=a.i(59973);let e=(0,c.forwardRef)(function({label:a,error:e,hint:f,prefix:g,suffix:h,id:i,type:j="text",disabled:k=!1,required:l=!1,className:m="",...n},o){let p=(0,c.useId)(),q=i||`input-${p}`,r=e?`${q}-error`:void 0,s=f?`${q}-hint`:void 0;return(0,b.jsxs)("div",{className:`${d.default.wrapper} ${m}`,children:[a&&(0,b.jsxs)("label",{htmlFor:q,className:d.default.label,children:[a,l&&(0,b.jsx)("span",{className:d.default.required,"aria-hidden":"true",children:" *"})]}),(0,b.jsxs)("div",{className:`${d.default.inputWrapper} ${e?d.default.hasError:""} ${k?d.default.disabled:""}`,children:[g&&(0,b.jsx)("span",{className:d.default.prefix,"aria-hidden":"true",children:g}),(0,b.jsx)("input",{ref:o,id:q,type:j,disabled:k,required:l,"aria-invalid":e?"true":"false","aria-describedby":[r,s].filter(Boolean).join(" ")||void 0,className:d.default.input,...n}),h&&(0,b.jsx)("span",{className:d.default.suffix,children:h})]}),e&&(0,b.jsx)("p",{id:r,className:d.default.error,role:"alert",children:e}),f&&!e&&(0,b.jsx)("p",{id:s,className:d.default.hint,children:f})]})});a.s(["default",0,e],82728),a.s([],59096)},30761,a=>{a.v({arrow:"Select-module__nnj5sG__arrow",disabled:"Select-module__nnj5sG__disabled",error:"Select-module__nnj5sG__error",hasError:"Select-module__nnj5sG__hasError",hint:"Select-module__nnj5sG__hint",label:"Select-module__nnj5sG__label",required:"Select-module__nnj5sG__required",select:"Select-module__nnj5sG__select",selectWrapper:"Select-module__nnj5sG__selectWrapper",wrapper:"Select-module__nnj5sG__wrapper"})},72619,50812,a=>{"use strict";var b=a.i(14793),c=a.i(29507),d=a.i(30761);let e=(0,c.forwardRef)(function({label:a,error:e,hint:f,options:g=[],placeholder:h="Select an option",id:i,disabled:j=!1,required:k=!1,className:l="",...m},n){let o=(0,c.useId)(),p=i||`select-${o}`,q=e?`${p}-error`:void 0,r=f?`${p}-hint`:void 0;return(0,b.jsxs)("div",{className:`${d.default.wrapper} ${l}`,children:[a&&(0,b.jsxs)("label",{htmlFor:p,className:d.default.label,children:[a,k&&(0,b.jsx)("span",{className:d.default.required,"aria-hidden":"true",children:" *"})]}),(0,b.jsxs)("div",{className:`${d.default.selectWrapper} ${e?d.default.hasError:""} ${j?d.default.disabled:""}`,children:[(0,b.jsxs)("select",{ref:n,id:p,disabled:j,required:k,"aria-invalid":e?"true":"false","aria-describedby":[q,r].filter(Boolean).join(" ")||void 0,className:d.default.select,...m,children:[(0,b.jsx)("option",{value:"",disabled:!0,children:h}),g.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))]}),(0,b.jsx)("span",{className:d.default.arrow,"aria-hidden":"true",children:"â–¼"})]}),e&&(0,b.jsx)("p",{id:q,className:d.default.error,role:"alert",children:e}),f&&!e&&(0,b.jsx)("p",{id:r,className:d.default.hint,children:f})]})});a.s(["default",0,e],50812),a.s([],72619)},22678,a=>{a.v({active:"page-module__1-nkhW__active",backButton:"page-module__1-nkhW__backButton",card:"page-module__1-nkhW__card",completed:"page-module__1-nkhW__completed",container:"page-module__1-nkhW__container",form:"page-module__1-nkhW__form",header:"page-module__1-nkhW__header",icon:"page-module__1-nkhW__icon",iconWrapper:"page-module__1-nkhW__iconWrapper",progress:"page-module__1-nkhW__progress",progressDot:"page-module__1-nkhW__progressDot",progressItem:"page-module__1-nkhW__progressItem",progressLabel:"page-module__1-nkhW__progressLabel",progressLine:"page-module__1-nkhW__progressLine",progressStep:"page-module__1-nkhW__progressStep",pulse:"page-module__1-nkhW__pulse",resendButton:"page-module__1-nkhW__resendButton",resendTimer:"page-module__1-nkhW__resendTimer",resendWrapper:"page-module__1-nkhW__resendWrapper",stepContent:"page-module__1-nkhW__stepContent",subtitle:"page-module__1-nkhW__subtitle",successIcon:"page-module__1-nkhW__successIcon",summaryCard:"page-module__1-nkhW__summaryCard",summaryRow:"page-module__1-nkhW__summaryRow",title:"page-module__1-nkhW__title"})},64494,a=>{"use strict";var b=a.i(14793),c=a.i(29507);a.i(46121);var d=a.i(83556),e=a.i(62870),f=a.i(15188),g=a.i(16080);a.i(22142);var h=a.i(72395);a.i(59096);var i=a.i(82728);a.i(72619);var j=a.i(50812);a.i(10434);var k=a.i(42172),l=a.i(22678);let m="mobile",n="business",o="category",p="pending",q=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"cooperative",label:"Cooperative"},{value:"institution",label:"Institution"},{value:"processor",label:"Food Processor"}],r=[{id:"vegetables",label:"Vegetables",icon:"ðŸ¥¦"},{id:"fruits",label:"Fruits",icon:"ðŸŽ"},{id:"grains",label:"Grains & Pulses",icon:"ðŸŒ¾"},{id:"spices",label:"Spices",icon:"ðŸŒ¶ï¸"},{id:"flowers",label:"Flowers",icon:"ðŸŒ¸"},{id:"dairy",label:"Dairy",icon:"ðŸ¥›"}];function s(){let{t:a}=(0,d.useTranslation)(),s=(0,e.useDispatch)(),t=(0,f.useRouter)(),{isLoading:u,mobileNumber:v,isAuthenticated:w,user:x,error:y}=(0,e.useSelector)(a=>a.auth),[z,A]=(0,c.useState)(m),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)({businessName:"",taxId:"",category:"",contactName:"",interestedCategories:[],email:""}),[H,I]=(0,c.useState)({}),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(0);(0,c.useEffect)(()=>{w&&x?.status==="APPROVED"?t.push("/buyer/dashboard"):x?.status==="PENDING"&&A(p)},[w,x,t]);let P=(a,b)=>{G(c=>({...c,[a]:b})),H[a]&&I(b=>({...b,[a]:""}))},Q=async()=>{if(10!==B.length)return void E("Enter valid 10-digit mobile number");s((0,g.sendOtpStart)(B));try{await s((0,g.sendOtpAsync)(B)).unwrap(),s((0,g.sendOtpSuccess)()),A("otp"),S()}catch(a){s((0,g.sendOtpFailure)(a||"Failed to send OTP")),E(a||"Failed to send OTP")}},R=async()=>{if(0===F.interestedCategories.length)return void I({...H,interestedCategories:"Please select at least one category"});s((0,g.verifyOtpStart)());try{await s((0,g.registerAsync)({mobile:B,type:"buyer",businessName:F.businessName,taxId:F.taxId,businessCategory:F.category,contactName:F.contactName})).unwrap()}catch(a){if(console.error("âŒ Registration failed:",a),String(a).includes("User already exists")||String(a).includes("already exists")){alert("User account already exists. Redirecting to login..."),s((0,g.resetAuthFlow)()),window.location.href="/login";return}s((0,g.verifyOtpFailure)(a||"Registration failed"))}},S=()=>{O(30);let a=setInterval(()=>{O(b=>b<=1?(clearInterval(a),0):b-1)},1e3)},T=async a=>{if(6===a.length){s((0,g.verifyOtpStart)());try{(await s((0,g.verifyOtpAsync)({mobile:B,otp:a,userType:"buyer"})).unwrap()).isNewUser&&(s((0,g.sendOtpSuccess)()),A(n))}catch(a){M(a||"Invalid OTP"),s((0,g.verifyOtpFailure)(a))}}},U=()=>{"otp"===z?(A(m),s((0,g.resetAuthFlow)())):z===n?A("otp"):z===o?A(n):z===p&&(A(m),s((0,g.resetAuthFlow)()))};return(0,b.jsx)("main",{className:l.default.container,children:(0,b.jsxs)("div",{className:l.default.card,children:[z===m&&(0,b.jsxs)("div",{className:l.default.stepContent,children:[(0,b.jsxs)("div",{className:l.default.header,children:[(0,b.jsx)("div",{className:l.default.iconWrapper,children:(0,b.jsx)("span",{className:l.default.icon,role:"img","aria-label":"buyer",children:"ðŸ›’"})}),(0,b.jsx)("h1",{className:l.default.title,children:a("auth.buyer.title")}),(0,b.jsx)("p",{className:l.default.subtitle,children:"Login or Register"})]}),(0,b.jsxs)("div",{className:l.default.form,children:[(0,b.jsx)(i.default,{label:"Mobile Number",type:"tel",inputMode:"numeric",placeholder:"Enter 10-digit mobile",value:B,onChange:a=>{C(a.target.value.replace(/\D/g,"").slice(0,10)),E("")},prefix:"+91",error:D||y,required:!0}),(0,b.jsx)(h.default,{onClick:Q,isLoading:u,fullWidth:!0,children:"Continue"})]})]}),"otp"===z&&(0,b.jsxs)("div",{className:l.default.stepContent,children:[(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-2 rounded-md mb-4 text-sm font-mono text-center",children:"ðŸ”” DEBUG OTP: 123456"}),(0,b.jsx)("button",{className:l.default.backButton,onClick:U,children:"â† Back"}),(0,b.jsxs)("div",{className:l.default.header,children:[(0,b.jsx)("div",{className:l.default.iconWrapper,children:(0,b.jsx)("span",{className:l.default.icon,role:"img","aria-label":"verify",children:"ðŸ”"})}),(0,b.jsx)("h1",{className:l.default.title,children:a("auth.farmer.otpTitle")}),(0,b.jsxs)("p",{className:l.default.subtitle,children:["Enter the 6-digit code sent to ",(0,b.jsxs)("strong",{children:["+91 ",B]})]})]}),(0,b.jsxs)("div",{className:l.default.form,children:[(0,b.jsx)(k.default,{length:6,onChange:K,onComplete:T,disabled:u,error:L||y}),(0,b.jsx)(h.default,{onClick:()=>T(J),isLoading:u,disabled:6!==J.length,fullWidth:!0,children:a("auth.farmer.verifyOtp")}),(0,b.jsx)("div",{className:l.default.resendWrapper,children:N>0?(0,b.jsxs)("p",{className:l.default.resendTimer,children:["Resend in ",N,"s"]}):(0,b.jsx)("button",{className:l.default.resendButton,onClick:()=>{s((0,g.sendOtpAsync)(B)),S()},children:"Resend OTP"})})]})]}),z===n&&(0,b.jsxs)("div",{className:l.default.stepContent,children:[(0,b.jsx)("button",{className:l.default.backButton,onClick:U,children:"â† Back"}),(0,b.jsxs)("div",{className:l.default.header,children:[(0,b.jsx)("h1",{className:l.default.title,children:"Business Details"}),(0,b.jsx)("p",{className:l.default.subtitle,children:"Complete your profile to continue"})]}),(0,b.jsxs)("div",{className:l.default.form,children:[(0,b.jsx)(i.default,{label:a("auth.buyer.businessName"),placeholder:"Enter your business name",value:F.businessName,onChange:a=>P("businessName",a.target.value),error:H.businessName,required:!0}),(0,b.jsx)(i.default,{label:a("auth.buyer.taxId"),placeholder:"e.g., 22AAAAA0000A1Z5",value:F.taxId,onChange:a=>P("taxId",a.target.value.toUpperCase()),error:H.taxId,hint:"GST Number",required:!0}),(0,b.jsx)(j.default,{label:a("auth.buyer.category"),placeholder:"Select business type",options:q,value:F.category,onChange:a=>P("category",a.target.value),error:H.category,required:!0}),(0,b.jsx)(i.default,{label:"Contact Person",placeholder:"Enter contact person name",value:F.contactName,onChange:a=>P("contactName",a.target.value),error:H.contactName,required:!0}),(0,b.jsx)(h.default,{onClick:()=>{let a;a={},F.businessName.trim()||(a.businessName="Business name is required"),F.taxId.trim()||(a.taxId="Tax ID / GST Number is required"),F.category||(a.category="Please select a business category"),F.contactName.trim()||(a.contactName="Contact person name is required"),I(a),0===Object.keys(a).length&&A(o)},fullWidth:!0,children:"Continue to Interests"})]})]}),z===o&&(0,b.jsxs)("div",{className:l.default.stepContent,children:[(0,b.jsx)("button",{className:l.default.backButton,onClick:U,children:"â† Back"}),(0,b.jsxs)("div",{className:l.default.header,children:[(0,b.jsx)("h1",{className:l.default.title,children:"What do you buy?"}),(0,b.jsx)("p",{className:l.default.subtitle,children:"Select categories you are interested in"})]}),(0,b.jsxs)("div",{className:l.default.form,children:[(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:r.map(a=>(0,b.jsxs)("button",{className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${F.interestedCategories.includes(a.id)?"border-green-600 bg-green-50 text-green-700 font-medium ring-1 ring-green-600":"border-gray-200 hover:border-green-400 hover:bg-gray-50 text-gray-600"}`,onClick:()=>{var b;return b=a.id,void(G(a=>{let c=a.interestedCategories||[];return c.includes(b)?{...a,interestedCategories:c.filter(a=>a!==b)}:{...a,interestedCategories:[...c,b]}}),H.interestedCategories&&I(a=>({...a,interestedCategories:""})))},children:[(0,b.jsx)("span",{className:"text-2xl",children:a.icon}),(0,b.jsx)("span",{className:"text-sm",children:a.label})]},a.id))}),H.interestedCategories&&(0,b.jsx)("p",{className:"text-red-500 text-sm text-center mb-4",children:H.interestedCategories}),(0,b.jsx)(h.default,{onClick:R,isLoading:u,fullWidth:!0,children:"Complete Registration"})]})]}),z===p&&(0,b.jsxs)("div",{className:l.default.stepContent,children:[(0,b.jsxs)("div",{className:l.default.header,children:[(0,b.jsx)("div",{className:`${l.default.iconWrapper} ${l.default.pendingIcon}`,children:(0,b.jsx)("span",{className:l.default.icon,role:"img","aria-label":"pending",children:"â³"})}),(0,b.jsx)("h1",{className:l.default.title,style:{color:"#d97706"},children:"Verification Pending"}),(0,b.jsx)("p",{className:l.default.subtitle,children:"Your account is currently under review by the administrator."})]}),(0,b.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:(0,b.jsx)("p",{className:"text-sm text-yellow-800 text-center",children:"Please wait for admin approval. You can try logging in later to check your status."})}),(0,b.jsx)(h.default,{onClick:()=>{s((0,g.resetAuthFlow)()),A(m),C(""),K("")},variant:"outline",fullWidth:!0,children:"Back to Login"})]})]})})}a.s(["default",()=>s])}];

//# sourceMappingURL=SEM6_SE_Farmer_Connect_src_a4ec4e00._.js.map